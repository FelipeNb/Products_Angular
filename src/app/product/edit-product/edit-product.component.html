<div class="container">
  <form (ngSubmit)="onSubmit()" [formGroup]="productForm">
    <div class="row">
      <div class="col-8">
        <h4 class="h4">Product</h4>
        <label for="product_name">Name</label>
        <input
          class="form-control"
          type="text"
          name="product_name"
          id="product_name"
          formControlName="productName"
        />
        <label for="product_price">Price</label>
        <input
          class="form-control"
          type="number"
          name="product_price"
          id="product_price"
          formControlName="productPrice"
        />
        <label for="product_img">Image</label>
        <input
          class="form-control"
          type="text"
          name="product_img"
          id="product_img"
          formControlName="productImg"
        />
      </div>
      <div class="col text-center">
        <img
          *ngIf="productForm.value.productImg != ''"
          [src]="productForm.value.productImg"
          class="img-responsive rounded text-center"
          width="80%"
        />
        <h6
          *ngIf="productForm.value.productImg == ''"
          class="align-self-center"
        >
          Image preview
        </h6>
      </div>
    </div>

    <hr />
    <h4 class="h4">Recipe</h4>

    <div formGroupName="productRecipe">
      <div class="row">
        <div class="col-8">
          <label for="recipe_name">Name</label>
          <input
            class="form-control"
            type="text"
            name="recipe_name"
            id="recipe_name"
            formControlName="recipeName"
          />
          <label for="recipe_Kcal">Kcal</label>
          <input
            class="form-control"
            type="number"
            name="recipe_Kcal"
            id="recipe_Kcal"
            formControlName="recipeKcal"
          />
          <label for="recipe_Portion">Portion</label>
          <input
            class="form-control"
            type="number"
            name="recipe_Portion"
            id="recipe_Portion"
            formControlName="recipePortion"
          />

          <label for="recipe_img">Image</label>
          <input
            class="form-control"
            type="text"
            name="recipe_img"
            id="recipe_img"
            formControlName="recipeImg"
          />
        </div>
        <div class="col text-center">
          <img
            [src]="productForm.value.productRecipe.recipeImg"
            class="img-responsive rounded text-center"
            width="80%"
          />
        </div>
      </div>
      <hr />
      <h4 class="h4">Recipe</h4>

      <div class="row">
        <div class="col-xs-12" formArrayName="ingredients">
          <div
            class="row"
            style="margin-top: 10px;"
            *ngFor="let ingredient of getIngredientsControls(); let i = index"
            [formGroupName]="i"
          >
            <div class="col-xs-8">
              <input type="text" class="form-control" formControlName="name" />
            </div>
            <div class="col-xs-2">
              <input
                type="number"
                class="form-control"
                formControlName="amount"
              />
            </div>
            <div class="col-xs-2">
              <button
                type="button"
                class="btn btn-danger"
                (click)="onDeleteIngredient(i)"
              >
                X
              </button>
            </div>
          </div>
        </div>
      </div>

      <hr />
      <h4 class="h4">How to prepare</h4>

      <div class="row">
        <div class="col-xs-12" formArrayName="howPrepare">
          <div
            class="row"
            style="margin-top: 10px;"
            *ngFor="let step of getHowPrepareControls(); let j = index"
            [formGroupName]="j"
          >
            <div class="col-xs-10">
              <input type="text" class="form-control" formControlName="name" />
            </div>

            <div class="col-xs-2">
              <button
                type="button"
                class="btn btn-danger"
                (click)="onDeleteStep(j)"
              >
                X
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <button type="button" class="btn btn-success" (click)="onAddIngredient()">
      Add ingredient
    </button>
    <button type="button" class="btn btn-success" (click)="onAddStep()">
      Add step
    </button>

    <hr />
    <button class="btn btn-success" type="submit">{{ btnLabel }}</button>
  </form>
</div>
